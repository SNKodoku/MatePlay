<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Actividad: Problemas Algebraicos | MatePlay</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="stylesheet" href="../../css/style.css">
</head>

<body>

<!-- NAV -->
<header>
  <nav class="nav">
    <div class="logo">
      <div class="logo-icon">M</div>
      <span>MatePlay</span>
    </div>
    <div class="nav-links">
      <a href="../../nivel3.html">Volver al Nivel 3</a>
      <a href="../../logros.html">Logros ‚≠ê</a>
    </div>
  </nav>
</header>

<main>

  <section>
    <h1 class="section-title">Problemas Algebraicos</h1>
    <p class="section-subtitle">
      Lee el problema, trad√∫celo a una ecuaci√≥n y elige el valor correcto de la inc√≥gnita.
    </p>
  </section>

  <section>
    <div class="game-container">

      <!-- IZQUIERDA -->
      <div>
        <span class="game-level-label">Nivel 3 ¬∑ Problemas Algebraicos</span>

        <p id="probAlg-texto" class="game-question"></p>

        <div id="probAlg-opciones" class="game-options"></div>

        <p id="probAlg-resultado" class="game-result"></p>

        <button class="btn btn-primary" onclick="nuevoProblemaAlg()">
          üîÑ Nuevo problema
        </button>
      </div>

      <!-- DERECHA -->
      <aside class="game-side">
        <p class="game-side-title">¬øC√≥mo resolver?</p>
        <p>Todo problema se puede convertir en una ecuaci√≥n.</p>
        <hr>
        <p><strong>Ejemplo:</strong></p>
        <p><em>‚ÄúEl doble de un n√∫mero m√°s 7 es 25.‚Äù</em></p>
        <p>2x + 7 = 25</p>
        <p>2x = 18 ‚Üí x = 9</p>
        <hr>
        <p>Usa estructuras como:</p>
        <p><strong>ax + b = c</strong></p>
        <p><strong>a(x + b) = c</strong></p>
      </aside>

    </div>
  </section>

  <section style="margin-top:2rem;">
    <button class="btn btn-secondary" onclick="window.location.href='../nivel3.html'">
      ‚¨Ö Volver al Nivel 3
    </button>
  </section>

</main>

<footer>
  MatePlay ¬∑ Actividad de Problemas Algebraicos ¬∑ 2025
</footer>

<!-- ‚≠ê SISTEMA DE LOGROS GLOBAL -->
<script src="../../js/logros.js"></script>

<!-- ‚≠ê POPUP -->
<script>
  function popupEstrella() {
    let pop = document.createElement("div");
    pop.textContent = "‚≠ê ¬°Ganaste una estrella!";
    pop.style.position = "fixed";
    pop.style.bottom = "25px";
    pop.style.right = "25px";
    pop.style.padding = "15px 20px";
    pop.style.background = "#4f46e5";
    pop.style.color = "white";
    pop.style.borderRadius = "10px";
    pop.style.boxShadow = "0 4px 12px rgba(0,0,0,0.25)";
    pop.style.zIndex = "999";
    pop.style.opacity = "1";
    pop.style.transition = "opacity 1s ease";

    document.body.appendChild(pop);

    setTimeout(() => {
      pop.style.opacity = "0";
      setTimeout(() => pop.remove(), 1000);
    }, 1500);
  }
</script>

<!-- ‚≠ê SCRIPT PRINCIPAL -->
<script>
  let solucionCorrecta = 0;

  function nuevoProblemaAlg() {

    const problemas = [
      (x) => ({
        texto: `El doble de un n√∫mero m√°s 7 es igual a ${2*x + 7}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      }),
      (x) => ({
        texto: `Si al triple de un n√∫mero le restas 4 obtienes ${3*x - 4}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      }),
      (x) => ({
        texto: `La mitad de un n√∫mero aumentada en 6 es igual a ${x/2 + 6}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      }),
      (x) => ({
        texto: `Un n√∫mero m√°s su doble es igual a ${3*x}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      }),
      (x) => ({
        texto: `El triple de un n√∫mero aumentado en 5 es igual a ${3*x + 5}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      }),
      (x) => ({
        texto: `Si restas 8 a un n√∫mero obtienes ${x - 8}. ¬øCu√°l es el n√∫mero?`,
        solucion: x
      })
    ];

    let x = Math.floor(Math.random() * 20) + 5;
    let problema = problemas[Math.floor(Math.random() * problemas.length)](x);

    document.getElementById("probAlg-texto").textContent = problema.texto;

    solucionCorrecta = problema.solucion;

    const res = document.getElementById("probAlg-resultado");
    res.textContent = "";
    res.className = "game-result";

    generarOpcionesAlg(solucionCorrecta);
  }

  function generarOpcionesAlg(correcta) {
    const cont = document.getElementById("probAlg-opciones");
    cont.innerHTML = "";

    const opciones = new Set([correcta]);

    while (opciones.size < 4) {
      let desvio = Math.floor(Math.random() * 11) - 5;
      let posible = correcta + desvio;
      if (posible > 0) opciones.add(posible);
    }

    const mezcladas = Array.from(opciones).sort(() => Math.random() - 0.5);

    mezcladas.forEach(num => {
      const btn = document.createElement("button");
      btn.className = "game-option";
      btn.textContent = num;
      btn.onclick = () => evaluarAlg(num);
      cont.appendChild(btn);
    });
  }

  function evaluarAlg(num) {
    const res = document.getElementById("probAlg-resultado");

    if (num === solucionCorrecta) {
      res.textContent = "¬°Correcto! üéâ";
      res.className = "game-result ok";

      // ‚≠ê ESTRELLA DE ESTA ACTIVIDAD
      if (typeof sumarEstrella === "function") {
        sumarEstrella("nivel3_problemasAlgebra");
      }

      popupEstrella();

    } else {
      res.textContent = "Incorrecto ‚ùå, sigue intentando";
      res.className = "game-result bad";
    }
  }

  nuevoProblemaAlg();
</script>

</body>
</html>
